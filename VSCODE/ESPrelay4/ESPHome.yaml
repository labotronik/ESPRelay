esphome:
  name: esprelay4
  friendly_name: ESPRelay4

esp32:
  board: esp32-s3-devkitc-1
  framework:
    type: arduino

logger:
api:
ota:

# Ethernet W5500
spi:
  id: spi0
  clk_pin: GPIO12
  mosi_pin: GPIO11
  miso_pin: GPIO13

# Wi‑Fi fallback (commenté)
# wifi:
#   ssid: !secret wifi_ssid
#   password: !secret wifi_password
#   ap:
#     ssid: "ESPRelay4-Fallback"
#     password: "esprelay4"

ethernet:
  type: W5500
  spi_id: spi0
  cs_pin: GPIO10
  # interrupt_pin: GPIOxx   # si câblé
  # reset_pin: GPIOxx       # si câblé
  # manual_ip:
  #   static_ip: 192.168.1.50
  #   gateway: 192.168.1.1
  #   subnet: 255.255.255.0
  #   dns1: 192.168.1.1

# I2C -> PCA9538 (compatible pca9554)
i2c:
  sda: GPIO8
  scl: GPIO9
  scan: true

pca9554:
  - id: pca
    address: 0x70

# 4 relais (IO0..IO3)
switch:
  - platform: gpio
    name: "Relay 1"
    pin:
      pca9554: pca
      number: 0
      mode: OUTPUT
      inverted: false
  - platform: gpio
    name: "Relay 2"
    pin:
      pca9554: pca
      number: 1
      mode: OUTPUT
      inverted: false
  - platform: gpio
    name: "Relay 3"
    pin:
      pca9554: pca
      number: 2
      mode: OUTPUT
      inverted: false
  - platform: gpio
    name: "Relay 4"
    pin:
      pca9554: pca
      number: 3
      mode: OUTPUT
      inverted: false

# 4 entrées (IO4..IO7)
binary_sensor:
  - platform: gpio
    name: "Input 1"
    pin:
      pca9554: pca
      number: 4
      mode: INPUT
  - platform: gpio
    name: "Input 2"
    pin:
      pca9554: pca
      number: 5
      mode: INPUT
  - platform: gpio
    name: "Input 3"
    pin:
      pca9554: pca
      number: 6
      mode: INPUT
  - platform: gpio
    name: "Input 4"
    pin:
      pca9554: pca
      number: 7
      mode: INPUT

# Optionnel : DHT22 (GPIO2) et DS18B20 (GPIO1)
# dht:
#   - platform: dht
#     pin: GPIO2
#     model: DHT22
#     temperature:
#       name: "DHT22 Temperature"
#     humidity:
#       name: "DHT22 Humidity"
#     update_interval: 5s
#
# onewire:
#   - platform: gpio
#     pin: GPIO1
#
# sensor:
#   - platform: dallas_temp
#     name: "DS18B20"
